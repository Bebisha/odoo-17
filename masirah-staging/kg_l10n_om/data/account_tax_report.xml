<?xml version="1.0" encoding="utf-8"?>
<odoo auto_sequence="1">
    <record id="tax_report_oman" model="account.report">
        <field name="name">VAT return Report</field>
        <field name="root_report_id" ref="account.generic_tax_report"/>
        <field name="country_id" ref="base.om"/>
        <field name="filter_fiscal_position" eval="True"/>
        <field name="availability_condition">always</field>
        <field name="column_ids">
            <record id="tax_report_vat_taxable_base" model="account.report.column">
                <field name="name">Taxable Base</field>
                <field name="expression_label">net</field>
                <field name="figure_type">monetary</field>

            </record>
            <record id="tax_report_vat_tax" model="account.report.column">
                <field name="name">Vat Due</field>
                <field name="expression_label">tax</field>
                <field name="figure_type">monetary</field>

            </record>
        </field>
        <field name="line_ids">

            <record id="tax_report_line_vat_supplies_in_sultanate_of_oman" model="account.report.line">
                <field name="name">1. Supplies in Sultanate of Oman</field>
                <!--                <field name="aggregation_formula">1a.tax + 1b.tax + 1c.tax +-->
                <!--                    1d.tax + 1e.tax +1f.tax-->
                <!--                </field>-->
                <field name="hierarchy_level">0</field>
                <field name="children_ids">
                    <record id="tax_report_line_1a" model="account.report.line">
                        <field name="name">1a. Supplies of goods / services taxed at 5%</field>
                        <field name="code">1a</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_1a_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <!--                                <field name="formula"-->
                                <!--                                       eval="[('tax_tag_ids', 'in',('+1(a) Supplies of goods / services taxed at 5% (Base)',-1(a) Supplies of goods / services taxed at 5% (Base)'))]"/>-->
                                <field name="formula">1(a) Supplies of goods / services taxed at 5% (Base)</field>
                            </record>
                            <record id="tax_report_line_1a_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <!--                                <field name="formula"-->
                                <!--                                       eval="[('tax_tag_ids', 'in',('+1(a) Supplies of goods / services taxed at 5% (Tax)',-1(a) Supplies of goods / services taxed at 5% (Tax)'))]"/>-->

                                <field name="formula">1(a) Supplies of goods / services taxed at 5% (Tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_1b" model="account.report.line">
                        <field name="name">1b. Supplies of goods / services taxed at 0%</field>
                        <field name="code">1b</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_1b_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">1(b) Supplies of goods / services taxed at 0% (Base)</field>
                            </record>
                            <record id="tax_report_line_1b_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">1(b) Supplies of goods / services taxed at 0% (Tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_1c" model="account.report.line">
                        <field name="name">1c. Supplies of goods / services tax exempt</field>
                        <field name="code">1c</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_1c_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">1(c) Supplies of goods / services tax exempt (Base)</field>
                            </record>
                            <record id="tax_report_line_1c_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">1(c) Supplies of goods / services tax exempt (Tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_1d" model="account.report.line">
                        <field name="name">1d. Supplies of goods, tax levy shifted to recipient inside GCC</field>
                        <field name="code">1d</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_1d_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">1(d) Supplies of goods, tax levy shifted to recipient inside GCC
                                    (Base)
                                </field>
                            </record>
                            <record id="tax_report_line_1d_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">1(d) Supplies of goods, tax levy shifted to recipient inside GCC
                                    (Tax)
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_1e" model="account.report.line">
                        <field name="name">1e. Supplies of services, tax levy shifted to recipient inside GCC</field>
                        <field name="code">1e</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_1e_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">1(e) Supplies of services, tax levy shifted to recipient inside
                                    GCC (Base)
                                </field>
                            </record>
                            <record id="tax_report_line_1e_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">1(e) Supplies of services, tax levy shifted to recipient inside
                                    GCC (Tax)
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_1f" model="account.report.line">
                        <field name="name">1f. Supply of goods as per profit margin scheme</field>
                        <field name="code">1f</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_1f_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">1(f) Supply of goods as per profit margin scheme (Base)</field>
                            </record>
                            <record id="tax_report_line_1f_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">1(f) Supply of goods as per profit margin scheme (Tax)</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
            <record id="tax_report_line_purchases_subject_to_reverse_charge_mechanism" model="account.report.line">
                <field name="name">2. Purchases subject to reverse charge mechanism</field>
                <!--                <field name="aggregation_formula">2a.tax + 2b.tax-->
                <!--                </field>-->
                <field name="hierarchy_level">0</field>
                <field name="children_ids">
                    <record id="tax_report_line_2a" model="account.report.line">
                        <field name="name">2a. Purchases from the GCC subject to Reverse Charge Mechanism</field>
                        <field name="code">2a</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_2a_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">2(a) Purchases from the GCC subject to Reverse Charge Mechanism
                                    (Base)
                                </field>
                            </record>
                            <record id="tax_report_line_2a_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">2(a) Purchases from the GCC subject to Reverse Charge Mechanism
                                    (Tax)
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_2b" model="account.report.line">
                        <field name="name">2b. Purchases from outside of GCC subject to Reverse Charge Mechanism</field>
                        <field name="code">2b</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_2b_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">2(b) Purchases from outside of GCC subject to Reverse Charge
                                    Mechanism (Base)
                                </field>
                            </record>
                            <record id="tax_report_line_2b_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">2(b) Purchases from outside of GCC subject to Reverse Charge
                                    Mechanism (Tax)
                                </field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
            <record id="tax_report_line_supplies_to_countries_outside_of_oman" model="account.report.line">
                <field name="name">3. Supplies to countries outside of Oman</field>
                <!--                <field name="aggregation_formula">3a.tax-->
                <!--                </field>-->
                <field name="hierarchy_level">0</field>
                <field name="children_ids">
                    <record id="tax_report_line_3a" model="account.report.line">
                        <field name="name">3a. Exports</field>
                        <field name="code">3a</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_3a_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">3(a) Exports (Base)</field>
                            </record>
                            <record id="tax_report_line_3a_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">3(a) Exports (Tax)</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
            <record id="tax_report_line_import_of_goods" model="account.report.line">
                <field name="name">4. Import of Goods</field>
                <!--                <field name="aggregation_formula">4a.tax + 4b.tax-->
                <!--                </field>-->
                <field name="hierarchy_level">0</field>
                <field name="children_ids">
                    <record id="tax_report_line_4a" model="account.report.line">
                        <field name="name">4a. Import of Goods (Postponed payment)</field>
                        <field name="code">4a</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_4a_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">4(a) Import of Goods (Postponed payment) (Base)</field>
                            </record>
                            <record id="tax_report_line_4a_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">4(a) Import of Goods (Postponed payment) (Tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_4b" model="account.report.line">
                        <field name="name">4b. Total goods imported</field>
                        <field name="code">4b</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_4b_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">4(b) Total goods imported (Base)</field>
                            </record>
                            <record id="tax_report_line_4b_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">4(b) Total goods imported (Tax)</field>
                                <!--                                <field name="formula">4(b) Total goods imported (Tax)</field>-->
                            </record>
                        </field>
                    </record>
                </field>
            </record>
            <record id="tax_report_line_total_vat_due" model="account.report.line">
                <field name="name">5. Total VAT due</field>
                <!--                <field name="aggregation_formula">1a.tax + 1f.tax +2a.tax + 2b.tax + 4a.tax-->
                <!--                </field>-->
                <field name="hierarchy_level">0</field>
                <field name="children_ids">
                    <record id="tax_report_line_5a" model="account.report.line">
                        <field name="name">5a. Total VAT due under (1(a)+1(f)+2(a)+2(b)+4(a)))</field>
                        <field name="code">5a</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_5a_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">aggregation</field>
                                <field name="formula">1a.net + 1f.net + 2a.net + 2b.net + 4a.net</field>
                            </record>
                            <record id="tax_report_line_5a_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">aggregation</field>
                                <field name="formula">1a.tax + 1f.tax + 2a.tax + 2b.tax + 4a.tax</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_5b" model="account.report.line">
                        <field name="name">5b. Adjustment of VAT due</field>
                        <field name="code">5b</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_5b_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">5(b) Adjustment of VAT due (Base)</field>
                            </record>
                            <record id="tax_report_line_5b_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">5(b) Adjustment of VAT due (Tax)</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
            <record id="tax_report_line_input_vat_credit" model="account.report.line">
                <field name="name">6. Input VAT credit</field>
                <field name="hierarchy_level">0</field>
                <field name="children_ids">
                    <record id="tax_report_line_6a" model="account.report.line">
                        <field name="name">6a. Purchases (except import of goods)</field>
                        <field name="code">6a</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_6a_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">6(a) Purchases (except import of goods) (Base)</field>
                            </record>
                            <record id="tax_report_line_6a_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">6(a) Purchases (except import of goods) (Tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_6b" model="account.report.line">
                        <field name="name">6b. Import of goods</field>
                        <field name="code">6b</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_6b_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">6(b) Import of goods (Base)</field>
                            </record>
                            <record id="tax_report_line_6b_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">6(b) Import of goods (Tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_6c" model="account.report.line">
                        <field name="name">6c. VAT on acquisition of fixed assets</field>
                        <field name="code">6c</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_6c_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">6(c) VAT on acquisition of fixed assets (Base)</field>
                            </record>
                            <record id="tax_report_line_6c_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">6(c) VAT on acquisition of fixed assets (Tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_6d" model="account.report.line">
                        <field name="name">6d. Adjustment of input VAT credit</field>
                        <field name="code">6d</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_6d_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">6(d) Adjustment of input VAT credit (Base)</field>
                            </record>
                            <record id="tax_report_line_6d_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">6(d) Adjustment of input VAT credit (Tax)</field>
                            </record>
                        </field>
                    </record>

                </field>
            </record>
            <record id="tax_report_line_tax_liability_calculation" model="account.report.line">
                <field name="name">7. Tax liability calculation</field>

                <field name="hierarchy_level">0</field>
                <field name="children_ids">
                    <record id="tax_report_line_7a" model="account.report.line">
                        <field name="name">7a. Total VAT due (5(a) + 5(b))</field>
                        <field name="code">7a</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_7a_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">aggregation</field>
                                <field name="formula">5a.net + 5b.net</field>
                            </record>
                            <record id="tax_report_line_7a_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">aggregation</field>
                                <field name="formula">5a.tax + 5b.tax</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_7b" model="account.report.line">
                        <field name="name">7b. Total input VAT Credit (6(a)+6(b)+6(c)+6(d))</field>
                        <field name="code">7b</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_7b_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">aggregation</field>
                                <field name="formula">6a.net + 6b.net + 6c.net + 6d.net</field>
                            </record>
                            <record id="tax_report_line_7b_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">6a.tax + 6b.tax + 6c.tax + 6d.tax</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_line_7c" model="account.report.line">
                        <field name="name">7c. Total (7(a) + 7(b))</field>
                        <field name="code">7c</field>
                        <field name="expression_ids">
                            <record id="tax_report_line_7c_base_tag" model="account.report.expression">
                                <field name="label">net</field>
                                <field name="engine">aggregation</field>
                                <field name="formula">7a.net + 7b.net</field>
                            </record>
                            <record id="tax_report_line_7c_tax_tag" model="account.report.expression">
                                <field name="label">tax</field>
                                <field name="engine">aggregation</field>
                                <field name="formula">7a.tax + 7b.tax</field>
                            </record>
                        </field>
                    </record>

                </field>
            </record>

        </field>
    </record>
</odoo>
