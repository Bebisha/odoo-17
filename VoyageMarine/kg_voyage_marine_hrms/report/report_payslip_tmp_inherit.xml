<odoo>
    <template id="kg_report_payslip_inherit" inherit_id="hr_payroll.report_payslip">
        <xpath expr="//t[@t-call='web.external_layout']" position="replace">
            <t t-call="web.html_container">
                <t t-call="web.basic_layout">
                    <t t-foreach="docs" t-as="doc">
                        <div class="page">
                            <div class="header">
                                <table class='table table-borderless table-condensed table-hover'>
                                    <tr width="100%">
                                        <td style="width: 50%;" align="left">
                                            <t t-if="doc.company_id.logo">
                                                <img t-attf-src="data:image/*;base64,{{doc.company_id.logo}}"
                                                     height="100px" width="75%"/>
                                            </t>
                                        </td>
                                        <td style="width: 50%;font-size:12px;" align="right">
                                            <t t-if="doc.company_id.zip">
                                                <span>P.O. Box:
                                                    <span t-field="doc.company_id.zip"/>,
                                                </span>
                                            </t>
                                            <t t-if="doc.company_id.city">
                                                <span t-field="doc.company_id.city"/>,
                                            </t>
                                            <t t-if="doc.company_id.state_id">
                                                <span t-field="doc.company_id.state_id.name"/>
                                            </t>
                                            <t t-if="doc.company_id.country_id">
                                                <span t-field="doc.company_id.country_id.code"/>
                                            </t>
                                            <br/>
                                            <t t-if="doc.company_id.email">
                                                <span t-field="doc.company_id.email"/>
                                            </t>
                                            <br/>
                                            <t t-if="doc.company_id.phone">
                                                <span t-field="doc.company_id.phone"/>
                                            </t>
                                            <br/>
                                            <t t-if="doc.company_id.mobile">
                                                <span t-field="doc.company_id.mobile"/>
                                            </t>
                                        </td>
                                    </tr>
                                    <tr width="100%">
                                        <td width="100%" colspan="2" style="border-bottom: 1pt solid black;"/>
                                    </tr>
                                </table>
                            </div>
                            <br/>
                            <br/>
                            <table style="border-collapse:collapse;width:100%;margin:5pt;border-radius: 5px 5px 5px 5px;">
                                <tr width="100%"
                                    style="font-size:15px;background-color: #b3cccc;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="center" width="100%" colspan="7"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Salary Slip For the month of
                                            <t t-esc="doc.date_from.strftime('%b %Y')"/>
                                        </strong>
                                    </td>
                                </tr>
                                <tr width="100%"
                                    style="font-size:15px;background-color: #99ccff;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="center" width="100%" colspan="7"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Employee Information</strong>
                                    </td>
                                </tr>
                                <tr width="100%"
                                    style="font-size:12px;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="left" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Employee ID</strong>
                                    </td>
                                    <td align="left" width="35%" colspan="3"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <span t-field="doc.employee_id.registration_number"/>
                                    </td>
                                    <td align="left" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Designation</strong>
                                    </td>
                                    <td width="35%" align="left" colspan="2"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <span t-field="doc.employee_id.job_id.name"/>
                                    </td>
                                </tr>
                                <tr width="100%"
                                    style="font-size:12px;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="left" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Employee Name</strong>
                                    </td>
                                    <td align="left" width="35%" colspan="3"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <span t-field="doc.employee_id.name"/>
                                    </td>
                                    <td align="left" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Department</strong>
                                    </td>
                                    <td width="35%" align="left" colspan="2"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <span t-field="doc.employee_id.department_id.name"/>
                                    </td>
                                </tr>
                                <tr width="100%"
                                    style="font-size:12px;background-color: #99ccff;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="center" width="50%" colspan="4"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Employee Attendance</strong>
                                    </td>
                                    <td align="center" width="50%" colspan="3"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Salary Transferred To</strong>
                                    </td>
                                </tr>
                                <tr width="100%"
                                    style="font-size:12px;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="left" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Working Days</strong>
                                    </td>
                                    <td align="center" width="5%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <span t-field="doc.days_in_month"/>
                                    </td>
                                    <td align="left" width="30%" colspan="2"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">

                                    </td>
                                    <td align="left" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Bank Name</strong>
                                    </td>
                                    <td width="35%" align="left" colspan="2"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <span t-field="doc.employee_id.bank_account_id.bank_id.display_name"/>
                                    </td>
                                </tr>
                                <tr width="100%"
                                    style="font-size:12px;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="left" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Payable Days</strong>
                                    </td>
                                    <td align="center" width="5%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <span t-field="doc.working_days"/>
                                    </td>
                                    <td align="left" width="30%" colspan="2"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                    </td>
                                    <td align="left" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Account No</strong>
                                    </td>
                                    <td width="35%" align="left" colspan="2"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <span t-field="doc.employee_id.bank_account_id.acc_number"/>
                                    </td>
                                </tr>
                                <tr width="100%"
                                    style="font-size:12px;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="left" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Leave Taken</strong>
                                    </td>
                                    <td align="center" width="5%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <span t-field="doc.total_leave_days"/>
                                    </td>
                                    <td align="left" width="30%" colspan="2"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">

                                    </td>
                                    <td align="left" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>IBAN Number</strong>
                                    </td>
                                    <td width="35%" align="left" colspan="2"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <span t-field="doc.employee_id.bank_account_id.bank_iban_number"/>
                                    </td>
                                </tr>
                                <tr width="100%"
                                    style="font-size:12px;background-color: #99ccff;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="center" width="100%" colspan="7"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Salary Calculations</strong>
                                    </td>
                                </tr>
                                <tr width="100%"
                                    style="font-size:12px;background-color: #b3b3ff;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="center" width="35%" colspan="3"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Earnings</strong>
                                    </td>
                                    <td align="right" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>AED</strong>
                                    </td>
                                    <td align="center" width="35%" colspan="2"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>Deductions</strong>
                                    </td>
                                    <td align="right" width="15%"
                                        style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                        <strong>AED</strong>
                                    </td>
                                </tr>
                                <t t-if="doc.line_ids">
                                    <t t-set="earnings"
                                       t-value="doc.line_ids.filtered(lambda l: l.is_alw and l.total != 0.00)"/>
                                    <t t-set="deductions" t-value="doc.line_ids.filtered(lambda l: l.is_ded and l.total != 0.00)"/>
                                    <t t-set="max_len" t-value="max(len(earnings), len(deductions))"/>
                                    <t t-set="total_earning" t-value="0"/>
                                    <t t-set="total_deduction" t-value="0"/>

                                    <t t-foreach="range(max_len)" t-as="i">
                                        <tr style="font-size:12px; border: 1pt solid black;">
                                            <t t-if="i &lt; len(earnings)">
                                                <td width="35%" style="border-right: 1pt solid black; padding:5px;"
                                                    colspan="3">
                                                    <span t-field="earnings[i].name"/>
                                                </td>
                                                <td width="15%" style="border-right: 1pt solid black; padding:5px;"
                                                    align="right">
                                                    <t t-esc="'%.2f' % earnings[i].total"/>
                                                </td>
                                            </t>
                                            <t t-if="i &gt;= len(earnings)">
                                                <td width="35%" style="border-right: 1pt solid black; padding:5px;"
                                                    colspan="3"/>
                                                <td width="15%" style="border-right: 1pt solid black; padding:5px;"/>
                                            </t>

                                            <t t-if="i &lt; len(deductions)">
                                                <td width="35%" style="border-right: 1pt solid black; padding:5px;"
                                                    colspan="2">
                                                    <span t-field="deductions[i].name"/>
                                                </td>
                                                <td width="15%" style="padding:5px;" align="right">
                                                    <t t-esc="'%.2f' % abs(deductions[i].total)"/>
                                                </td>
                                            </t>
                                            <t t-if="i &gt;= len(deductions)">
                                                <td width="35%" style="border-right: 1pt solid black; padding:5px;"
                                                    colspan="2"/>
                                                <td width="15%" style="padding:5px;"/>
                                            </t>
                                        </tr>
                                        <t t-if="i &lt; len(earnings)">
                                            <t t-set="total_earning" t-value="total_earning + earnings[i].total"/>
                                        </t>
                                        <t t-if="i &lt; len(deductions)">
                                            <t t-set="total_deduction" t-value="total_deduction + deductions[i].total"/>
                                        </t>
                                    </t>

                                    <tr width="100%"
                                        style="font-size:12px;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                        <td align="center" width="35%" colspan="3"
                                            style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                            <strong>Total Earnings</strong>
                                        </td>
                                        <td align="right" width="15%"
                                            style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                            <strong>
                                                <t t-esc="'%.2f' % total_earning"/>
                                            </strong>
                                        </td>
                                        <td align="center" width="35%" colspan="2"
                                            style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                            <strong>Total Deductions</strong>
                                        </td>
                                        <td align="right" width="15%"
                                            style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                            <strong>
                                                <t t-esc="'%.2f' % abs(total_deduction)"/>
                                            </strong>
                                        </td>
                                    </tr>
                                    <t t-set="net_salary" t-value="total_earning - abs(total_deduction)"/>
                                    <tr width="100%"
                                        style="font-size:12px;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                        <td align="right" width="85%" colspan="6"
                                            style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                            <strong>Net Salary (AED)</strong>
                                        </td>
                                        <td align="right" width="15%"
                                            style="border-right: 1pt solid black;padding-left:5px;padding-right:5px;padding-top:5px;padding-bottom:5px;">
                                            <strong>
                                                <t t-esc="'%.2f' % net_salary"/>
                                            </strong>
                                        </td>
                                    </tr>
                                    <tr width="100%"
                                        style="font-size:12px;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                        <td align="left" width="20%" colspan="2"
                                            style="border-right: 1pt solid black;padding-left:10px;padding-right:10px;padding-top:10px;padding-bottom:10px;">
                                            <strong>Amount In Words</strong>
                                        </td>
                                        <td align="center" width="80%" colspan="5"
                                            style="border-right: 1pt solid black;padding-left:10px;padding-right:10px;padding-top:10px;padding-bottom:10px;">
                                            <strong>
                                                <t t-esc="doc.currency_id.amount_to_text(doc.net_wage)"/>
                                            </strong>
                                        </td>
                                    </tr>
                                </t>
                                <tr width="100%"
                                    style="font-size:12px;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="left" width="100%" colspan="7"
                                        style="border-right: 1pt solid black;padding-left:7px;padding-right:7px;padding-top:7px;padding-bottom:7px;">
                                    </td>
                                </tr>
                                <tr width="100%"
                                    style="font-size:12px;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="left" width="35%" colspan="3"
                                        style="border-right: 1pt solid black;padding-left:20px;padding-right:20px;padding-top:20px;padding-bottom:20px;">
                                        <strong>Prepared By</strong>
                                    </td>
                                    <td align="left" width="65%" colspan="4"
                                        style="border-right: 1pt solid black;padding-left:20px;padding-right:20px;padding-top:20px;padding-bottom:20px;">
                                        <strong>Employee Signature</strong>
                                    </td>
                                </tr>
                                <tr width="100%"
                                    style="font-size:12px;border-left: 1pt solid black;border-right: 1pt solid black;border-top: 1pt solid black;border-bottom: 1pt solid black;">
                                    <td align="center" width="100%" colspan="7"
                                        style="border-right: 1pt solid black;padding-left:10px;padding-right:10px;padding-top:10px;padding-bottom:10px;">
                                        <strong>This is system generated payslip</strong>
                                    </td>
                                </tr>
                            </table>
                            <div class="footer o_standard_footer ">
                                <div style="display: flex; justify-content: space-between; align-items: flex-start; padding-top: 15px;">
                                    <table width="100%" class="table table-borderless table-sm">
                                        <tr>
                                            <tr width="100%" style="font-size:12px;">
                                                <td width="100%" align="center">
                                                    <t t-if="doc.company_id.website">
                                                        <strong>
                                                            <span t-field="doc.company_id.website"/>
                                                        </strong>
                                                    </t>
                                                </td>
                                            </tr>
                                            <tr width="100%">
                                                <td style="width: 110%;border-bottom: 1pt solid black;"/>
                                            </tr>
                                            <tr width="100%">
                                                <td width="100%">
                                                    <div style="text-align: left;font-size:14px">
                                                        A professional Supplier and Service provider for All
                                                        Electrical &amp;
                                                        Instrumentation, Automation&amp; Control, Fire &amp; Safety,
                                                        Navigation and Communication and Calibration requirements
                                                        for Marine, Oil &amp; Gas
                                                        and Energy Industry.
                                                    </div>
                                                </td>
<!--                                                <td width="22%">-->
<!--                                                    <div style="text-align: right; ">-->
<!--                                                        <t t-if="doc.company_id.logo">-->
<!--                                                            <img t-attf-src="data:image/*;base64,{{doc.company_id.logo}}"-->
<!--                                                                 style="max-height: 40px;max-width: 70px;"/>-->
<!--                                                        </t>-->
<!--                                                    </div>-->
<!--                                                </td>-->
                                            </tr>
                                        </tr>
                                    </table>
                                </div>
                                <div t-if="report_type == 'pdf'" style="color:black; text-align: center;">
                                    Page:
                                    <span class="page"/>
                                    of
                                    <span class="topage"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </xpath>
    </template>
</odoo>