<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-inherit="web_gantt.GanttRenderer.Header" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('o_gantt_header_slots')]" position="replace">
            <div class="o_gantt_header_slots o_gantt_grid_columns flex-grow-1 bg-view fw-bold bg-100">
                <t t-set="formats" t-value="{'week': 'cccc, d', 'month': 'dd', 'year': env.isSmall ? 'MMM' : 'MMMM'}"/>
                <t t-set="test" t-value="24"/>
                <t t-if="activeModel == 'project.task'">
<t t-if="model.metaData.scale.id == 'day'">

    <!-- Tasks (same as before) -->
    <div class="o_gantt_title d-flex align-items-center px-2"
         style="grid-column:1 / span 10; border-bottom:1px solid #dedad9;">
        Scope
    </div>

    <!-- Coordinator (INCREASED WIDTH) -->
    <div class="o_gantt_title d-flex align-items-center px-2"
         style="grid-column:11 / span 10; border-bottom:1px solid #dedad9;">
        Coordinator
    </div>

    <!-- Progress (shifted right) -->
    <div class="o_gantt_title d-flex align-items-center px-2"
         style="grid-column:21 / span 6; border-bottom:1px solid #dedad9;">
        Progress
    </div>

    <!-- Start (shifted right) -->
    <div class="o_gantt_title d-flex align-items-center px-2"
         style="grid-column:27 / span 7; border-bottom:1px solid #dedad9;">
        Start
    </div>

    <!-- Finish (shifted right) -->
    <div class="o_gantt_title d-flex align-items-center px-2"
         style="grid-column:34 / span 7; border-bottom:1px solid #dedad9;">
        Finish
    </div>

</t>
                    <t t-if="model.metaData.scale.id == 'month'">

    <!-- Tasks (WIDER) -->
                        <div class="o_gantt_title d-flex align-items-center"
                             style="grid-column:1 / span 6;
                font-size:12px;
                border-bottom:1px solid #dedad9;
                font-weight:bold;">
        Scope
    </div>

                        <!-- Assignee -->
                        <div class="o_gantt_title d-flex align-items-center"
                             style="grid-column:7 / span 7;
                font-size:12px;
                border-bottom:1px solid #dedad9;
                font-weight:bold;">
        Coordinator
    </div>

                        <!-- Progress -->
                        <div class="o_gantt_title d-flex align-items-center"
                             style="grid-column:14 / span 4;
                font-size:12px;
                border-bottom:1px solid #dedad9;
                font-weight:bold;">
        Progress
    </div>

                        <!-- Start (WIDER) -->
                        <div class="o_gantt_title d-flex align-items-center"
                             style="grid-column:18 / span 6;
                font-size:12px;
                border-bottom:1px solid #dedad9;
                font-weight:bold;">
        Start
    </div>

                        <!-- Finish -->
                        <div class="o_gantt_title d-flex align-items-center justify-content-center"
                             style="grid-column:24 / span 4;
                font-size:12px;
                border-bottom:1px solid #dedad9;
                font-weight:bold;">
        Finish
    </div>

</t>
                    <t t-if="model.metaData.scale.id == 'week'">

    <!-- Tasks -->
                        <div class="o_gantt_title d-flex align-items-center justify-content-center"
                             style="grid-column:1 / span 2;
                font-size:12px;
                border-bottom:1px solid #dedad9;
                font-weight:bold;">
        Scope
    </div>

                        <!-- Assignee -->
                        <div class="o_gantt_title d-flex align-items-center justify-content-center"
                             style="grid-column:3 / span 2;
                font-size:12px;
                border-bottom:1px solid #dedad9;
                font-weight:bold;">
        Coordinator
    </div>

                        <!-- Progress -->
                        <div class="o_gantt_title d-flex align-items-center justify-content-center"
                             style="grid-column:5 / span 2;
                font-size:12px;
                border-bottom:1px solid #dedad9;
                font-weight:bold;">
        Progress
    </div>

                        <!-- Start (SHIFTED LEFT) -->
                        <div class="o_gantt_title d-flex align-items-center justify-content-center"
                             style="grid-column:7 / span 1;
                font-size:12px;
                border-bottom:1px solid #dedad9;
                font-weight:bold;">
        Start
    </div>

                        <!-- Finish (SHIFTED LEFT) -->
                        <div class="o_gantt_title d-flex align-items-center justify-content-center"
                             style="grid-column:8 / span 2;
                font-size:12px;
                border-bottom:1px solid #dedad9;
                font-weight:bold;">
        Finish
    </div>

</t>
                    <t t-if="model.metaData.scale.id == 'year'">

    <!-- Tasks -->
                        <div class="o_gantt_title fw-bold d-flex align-items-center justify-content-center"
                             style="grid-column:1 / span 3; border-bottom:1px solid #dedad9;">
        Scope
    </div>

                        <!-- Assignee -->
                        <div class="o_gantt_title fw-bold d-flex align-items-center justify-content-center"
                             style="grid-column:4 / span 4; border-bottom:1px solid #dedad9;">
        Coordinator
    </div>

                        <!-- Progress -->
                        <div class="o_gantt_title fw-bold d-flex align-items-center justify-content-center"
                             style="grid-column:8 / span 2; border-bottom:1px solid #dedad9;">
        Progress
    </div>

                        <!-- Start (WIDER) -->
                        <div class="o_gantt_title fw-bold d-flex align-items-center justify-content-center"
                             style="grid-column:10 / span 2; border-bottom:1px solid #dedad9;">
        Start
    </div>

                        <!-- Finish (WIDER) -->
                        <div class="o_gantt_title fw-bold d-flex align-items-center justify-content-center"
                             style="grid-column:12 / span 2; border-bottom:1px solid #dedad9;">
        Finish
    </div>

</t>
                </t>

                <t t-foreach="columns" t-as="column" t-key="column.id">
                    <t t-set="test" t-value="test + 2"/>
                    <t t-if="activeModel == 'project.task'">
                        <t t-if="model.metaData.scale.id == 'day'">


                             <div class="o_gantt_title d-flex align-items-center justify-content-center border-bottom py-2"
                                  style="white-space: nowrap; font-size: 12px;"
                                  t-att-class="{o_gantt_today: column.isToday, 'bg-100': !column.isToday,}"
                                  t-att-style="getGridPosition({column: [column.grid.column[0]+40,column.grid.column[1]]})+ '; border-bottom: 1px solid #dedad9;'">

                                 <t t-if="model.metaData.scale.id in formats"
                                    t-esc="column.start.toFormat(formats[model.metaData.scale.id])"/>

                                 <small t-else="" class="text-center">
                                    <b t-esc="column.start.toFormat('h')"/>
                                     <div class="d-xl-inline-block" t-esc="column.start.toFormat('a').toLowerCase()"/>
                                 </small>
                                 <br/>
                            </div>
                        </t>
                        <t t-if="model.metaData.scale.id == 'month'">
                            <div class="o_gantt_header_cell d-flex align-items-center justify-content-center py-2"
                                 t-att-class="{o_gantt_today: column.isToday, 'bg-100': !column.isToday,}"
                                 t-att-style="getGridPosition({column: [column.grid.column[0]+28,column.grid.column[1]]});">

                                <t t-if="model.metaData.scale.id in formats"
                                   t-esc="column.start.toFormat(formats[model.metaData.scale.id])"/>

                                <small t-else="" class="text-center">
                                    <b t-esc="column.start.toFormat('h')"/>
                                    <div class="d-xl-inline-block" t-esc="column.start.toFormat('a').toLowerCase()"/>
                                </small>
                                <br/>
                            </div>
                        </t>
                        <t t-if="model.metaData.scale.id == 'week'">
                            <div class="o_gantt_header_cell d-flex align-items-center justify-content-center py-2"
                                 t-att-class="{o_gantt_today: column.isToday, 'bg-100': !column.isToday,}"
                                 t-att-style="getGridPosition({column: [column.grid.column[0]+9,column.grid.column[1]]});">

                                <t t-if="model.metaData.scale.id in formats"
                                   t-esc="column.start.toFormat(formats[model.metaData.scale.id])"/>

                                <small t-else="" class="text-center">
                                    <b t-esc="column.start.toFormat('h')"/>
                                    <div class="d-xl-inline-block" t-esc="column.start.toFormat('a').toLowerCase()"/>
                                </small>
                                <br/>
                            </div>
                        </t>
                        <t t-if="model.metaData.scale.id == 'year'">
    <div class="o_gantt_header_cell d-flex align-items-center justify-content-center py-2"
         t-att-class="{ o_gantt_today: column.isToday, 'bg-100': !column.isToday }"
         t-att-style="getGridPosition({
            column: [column.grid.column[0] + 13, column.grid.column[1]]
         });">

        <t t-if="model.metaData.scale.id in formats"
           t-esc="column.start.toFormat(formats[model.metaData.scale.id].replace('MMMM', 'MMM'))"/>
    </div>
</t>
                    </t>

                    <t t-else="">
                        <div class="o_gantt_header_cell d-flex align-items-center justify-content-center py-2"
                             t-att-class="{o_gantt_today: column.isToday, 'bg-100': !column.isToday,}"
                             t-att-style="getGridPosition({column: column.grid.column});">
                            <t t-if="model.metaData.scale.id in formats"
                               t-esc="column.start.toFormat(formats[model.metaData.scale.id])"/>
                            <small t-else="" class="text-center">
                                <b t-esc="column.start.toFormat('h')"/>
                                <div class="d-xl-inline-block" t-esc="column.start.toFormat('a').toLowerCase()"/>
                            </small>
                            <br/>
                        </div>

                    </t>
                </t>
            </div>
        </xpath>
    </t>


    <t t-inherit="web_gantt.GanttRenderer.RowContent" t-inherit-mode="extension">
      <xpath expr="//t[@t-name='web_gantt.GanttRenderer.RowContent']" position="replace">
          <t t-name="web_gantt.GanttRenderer.RowContent">
              <t t-if="activeModel == 'project.task'">
                  <t t-set="test" t-value="24"/>
                  <t t-if="model.metaData.scale.id == 'year'">
    <t t-foreach="columns" t-as="column" t-key="column.id">
        <t t-set="test" t-value="test + 2"/>

        <t t-if="test == 30">

            <!-- Tasks -->
            <div class="o_gantt_cell"
                 t-attf-style="{{ getGridPosition({ column: [1,3], row: row.grid.row }) }}">
                <span t-esc="row.parent or ''"/>
            </div>

            <!-- Assignee -->
            <div class="o_gantt_cell"
                 t-attf-style="{{ getGridPosition({ column: [4,4], row: row.grid.row }) }}">
                <span t-esc="row.assigned_user"/>
            </div>

            <!-- Progress -->
            <div class="o_gantt_cell"
                 t-attf-style="{{ getGridPosition({ column: [8,2], row: row.grid.row }) }}">
                <span t-esc="row.progress"/>
            </div>

            <!-- Start (WIDER) -->
            <div class="o_gantt_cell"
                 t-attf-style="{{ getGridPosition({ column: [10,2], row: row.grid.row }) }}">
                <span t-esc="row.start_date"/>
            </div>

            <!-- Finish (WIDER) -->
            <div class="o_gantt_cell"
                 t-attf-style="{{ getGridPosition({ column: [12,2], row: row.grid.row }) }}">
                <span t-esc="row.end_date"/>
            </div>

        </t>

        <!-- TIMELINE -->
        <div class="o_gantt_cell"
             t-attf-style="{{ getGridPosition({
                column: [column.grid.column[0] + 13, column.grid.column[1]],
                row: row.grid.row
             }) }};{{ row.cellColors[column.id] || '' }}"
             t-on-pointerdown.synthetic="onSelectStart"
             t-on-click.synthetic="() => row.isGroup and this.model.toggleRow(row.id)"/>
    </t>
</t>
                  <t t-elif="model.metaData.scale.id == 'month'">

    <!-- Tasks (WIDER) -->
                      <div class="o_gantt_cell"
                           t-attf-style="{{ getGridPosition({ column: [1,6], row: row.grid.row }) }};">
        <span t-esc="row.parent or ''"/>
    </div>

                      <!-- Assignee -->
                      <div class="o_gantt_cell"
                           t-attf-style="{{ getGridPosition({ column: [7,7], row: row.grid.row }) }};">
        <span t-esc="row.assigned_user"/>
    </div>

                      <!-- Progress -->
                      <div class="o_gantt_cell"
                           t-attf-style="{{ getGridPosition({ column: [14,4], row: row.grid.row }) }};">
        <span t-esc="row.progress"/>
    </div>

                      <!-- Start (WIDER) -->
                      <div class="o_gantt_cell"
                           t-attf-style="{{ getGridPosition({ column: [18,6], row: row.grid.row }) }};">
        <span t-esc="row.start_date"/>
    </div>

                      <!-- Finish -->
                      <div class="o_gantt_cell"
                           t-attf-style="{{ getGridPosition({ column: [24,4], row: row.grid.row }) }};">
        <span t-esc="row.end_date"/>
    </div>

                      <!-- TIMELINE (SHIFTED) -->
                      <t t-foreach="columns" t-as="column" t-key="column.id">
        <div class="o_gantt_cell"
             t-attf-style="{{ getGridPosition({
                column: [column.grid.column[0] + 28, column.grid.column[1]],
                row: row.grid.row
             }) }};{{ row.cellColors[column.id] || '' }}"
             t-on-pointerdown.synthetic="onSelectStart"
             t-on-click.synthetic="() => row.isGroup and this.model.toggleRow(row.id)"/>
    </t>

</t>
                  <t t-elif="model.metaData.scale.id == 'week'">
    <t t-foreach="columns" t-as="column" t-key="column.id">
        <t t-set="test" t-value="test + 2"/>

        <!-- FIXED COLUMNS -->
        <t t-if="test == 30">

            <!-- Tasks -->
            <div class="o_gantt_cell"
                 t-attf-style="text-align:center;{{ getGridPosition({ column: [1,2], row: row.grid.row }) }};">
                <span t-esc="row.parent or ''"/>
            </div>

            <!-- Assignee -->
            <div class="o_gantt_cell"
                 t-attf-style="text-align:center;{{ getGridPosition({ column: [3,2], row: row.grid.row }) }};">
                <span t-esc="row.assigned_user"/>
            </div>

            <!-- Progress -->
            <div class="o_gantt_cell"
                 t-attf-style="text-align:center;{{ getGridPosition({ column: [5,2], row: row.grid.row }) }};">
                <span t-esc="row.progress"/>
            </div>

            <!-- Start (SHIFTED LEFT) -->
            <div class="o_gantt_cell"
                 t-attf-style="text-align:center;{{ getGridPosition({ column: [7,1], row: row.grid.row }) }};">
                <span t-esc="row.start_date"/>
            </div>

            <!-- Finish (SHIFTED LEFT) -->
            <div class="o_gantt_cell"
                 t-attf-style="text-align:center;{{ getGridPosition({ column: [8,2], row: row.grid.row }) }};">
                <span t-esc="row.end_date"/>
            </div>

        </t>

        <!-- TIMELINE (SHIFTED LEFT) -->
        <div class="o_gantt_cell"
             t-attf-style="{{ getGridPosition({
                column: [column.grid.column[0] + 9, column.grid.column[1]],
                row: row.grid.row
             }) }};{{ row.cellColors[column.id] || '' }}"
             t-on-pointerdown.synthetic="onSelectStart"
             t-on-click.synthetic="() => row.isGroup and this.model.toggleRow(row.id)"/>
    </t>
</t>
<t t-elif="model.metaData.scale.id == 'day'">

    <!-- Tasks (same) -->
    <div class="o_gantt_cell d-flex align-items-center"
         t-attf-style="{{ getGridPosition({ column:[1,10], row:row.grid.row }) }}">
        <span
              t-att-title="row.parent"
              t-esc="row.parent"/>
    </div>

    <!-- Coordinator (WIDER) -->
    <div class="o_gantt_cell"
         t-attf-style="{{ getGridPosition({ column:[11,10], row:row.grid.row }) }}">
        <span t-esc="row.assigned_user"/>
    </div>

    <!-- Progress (shifted right) -->
    <div class="o_gantt_cell"
         t-attf-style="{{ getGridPosition({ column:[21,6], row:row.grid.row }) }}">
        <span t-esc="row.progress"/>
    </div>

    <!-- Start (shifted right) -->
    <div class="o_gantt_cell"
         t-attf-style="{{ getGridPosition({ column:[27,7], row:row.grid.row }) }}">
        <span t-esc="row.start_date"/>
    </div>

    <!-- Finish (shifted right) -->
    <div class="o_gantt_cell"
         t-attf-style="{{ getGridPosition({ column:[34,7], row:row.grid.row }) }}">
        <span t-esc="row.end_date"/>
    </div>

    <!-- TIMELINE (UNCHANGED) -->
    <t t-foreach="columns" t-as="column" t-key="column.id">
        <div class="o_gantt_cell"
             t-attf-style="{{ getGridPosition({
                column:[column.grid.column[0] + 40, column.grid.column[1]],
                row:row.grid.row
             }) }};{{ row.cellColors[column.id] || '' }}"
             t-on-pointerdown.synthetic="onSelectStart"/>
    </t>

</t>
                  <t t-else=" ">
                      <t t-foreach="columns" t-as="column" t-key="column.id">
                         <t t-set="test" t-value="test + 2"/>
                          <t t-if="test == 30">
                             <div class="o_gantt_cell" t-att-class="{
                                o_sample_data_disabled: isDisabled(row),
                                o_gantt_today: column.isToday,
                                o_gantt_group: row.isGroup,
                                o_gantt_hoverable: isHoverable(row),
                                o_group_open: !model.isClosed(row.id),
                                }"
                                  t-attf-style="text-align:center;{{ getGridPosition({ column: [1,6], row: row.grid.row }) }};"
                                  t-att-data-row-id="row.id"
                                  t-att-data-column-index="column_index"
                                  t-on-click.synthetic="() => row.isGroup and this.model.toggleRow(row.id)">
                               <span t-esc="row.assigned_user"/>
                             </div>
                              <div class="o_gantt_cell" t-att-class="{
                                o_sample_data_disabled: isDisabled(row),
                                o_gantt_today: column.isToday,
                                o_gantt_group: row.isGroup,
                                o_gantt_hoverable: isHoverable(row),
                                o_group_open: !model.isClosed(row.id),
                                }"
                                   t-attf-style="text-align:center;{{ getGridPosition({ column: [1,6], row: row.grid.row }) }};"
                                   t-att-data-row-id="row.id"
                                   t-att-data-column-index="column_index"
                                   t-on-click.synthetic="() => row.isGroup and this.model.toggleRow(row.id)">
                               <span t-esc="row.progress"/>
                             </div>
                              <div class="o_gantt_cell" t-att-class="{
                                o_sample_data_disabled: isDisabled(row),
                                o_gantt_today: column.isToday,
                                o_gantt_group: row.isGroup,
                                o_gantt_hoverable: isHoverable(row),
                                o_group_open: !model.isClosed(row.id),
                                }"
                                   t-attf-style="text-align:center;{{ getGridPosition({ column: [7,6], row: row.grid.row }) }};"
                                   t-att-data-row-id="row.id"
                                   t-att-data-column-index="column_index"
                                   t-on-click.synthetic="() => row.isGroup and this.model.toggleRow(row.id)">
                                 <span t-esc="row.start_date"/>
                             </div>

                              <div class="o_gantt_cell" t-att-class="{
                                o_sample_data_disabled: isDisabled(row),
                                o_gantt_today: column.isToday,
                                o_gantt_group: row.isGroup,
                                o_gantt_hoverable: isHoverable(row),
                                o_group_open: !model.isClosed(row.id),
                                }"
                                   t-attf-style="text-align:center;{{ getGridPosition({ column: [14,6], row: row.grid.row }) }}"
                                   t-att-data-row-id="row.id"
                                   t-att-data-column-index="column_index"
                                   t-on-click.synthetic="() => row.isGroup and this.model.toggleRow(row.id)">
                                <span t-esc="row.end_date"/>
                             </div>
                          </t>

                          <div class="o_gantt_cell" t-att-class="{
                                o_sample_data_disabled: isDisabled(row),
                                o_gantt_today: column.isToday,
                                o_gantt_group: row.isGroup,
                                o_gantt_hoverable: isHoverable(row),
                                o_group_open: !model.isClosed(row.id),
                                }"
                               t-attf-style="{{ getGridPosition({ column: [column.grid.column[0]+24,column.grid.column[1]], row: row.grid.row }) }};{{ row.cellColors[column.id] || '' }}"
                               t-att-data-row-id="row.id"
                               t-att-data-test="column.grid.column"
                               t-att-data-column-index="column_index"
                               t-on-pointerdown.synthetic="onSelectStart"
                               t-on-click.synthetic="() => row.isGroup and this.model.toggleRow(row.id)"/>
                      </t>
                  </t>

                  <!-- Pills -->
                  <t t-if="row.isGroup">
                    <!-- Group pills -->
                      <t t-if="model.metaData.scale.id == 'year'">
                         <t t-foreach="row.pills" t-as="pill" t-key="pill.id">
                             <div class="o_gantt_pill_wrapper o_gantt_group_pill align-items-center"
                                  t-att-class="{
                                    o_sample_data_disabled: isDisabled(row),
                                    o_group_open: !model.isClosed(row.id),
                                    }"
                                  t-att-style="getGridPosition({'column':[pill.grid.column[0]+13,pill.grid.column[1]],'row':pill.grid.row})">
                                 <div class="o_gantt_pill o_gantt_consolidated_pill position-relative overflow-visible"
                                      t-att-class="pill.className"
                                      t-att-title="pill.displayName">
                                    <span t-if="pill._progress"
                                          class="position-absolute h-100 o_gantt_progress"
                                          t-attf-style="width:{{ pill._progress }}%;"/>
                                 </div>
                                 <span class="o_gantt_pill_title 111 bg-view text-truncate px-1 z-index-1"
                                       t-esc="pill.displayName"/>
                             </div>
                         </t>
                     </t>
                      <t t-elif="model.metaData.scale.id == 'month'">
    <t t-foreach="row.pills" t-as="pill" t-key="pill.id">
        <div class="o_gantt_pill_wrapper o_gantt_group_pill align-items-center"
             t-att-class="{
                o_sample_data_disabled: isDisabled(row),
                o_group_open: !model.isClosed(row.id),
             }"
             t-att-style="getGridPosition({
                'column':[pill.grid.column[0] + 28, pill.grid.column[1]],
                'row':pill.grid.row
             })">
            <div class="o_gantt_pill o_gantt_consolidated_pill position-relative overflow-visible"
                 t-att-class="pill.className"
                 t-att-title="pill.displayName">
                <span t-if="pill._progress"
                      class="position-absolute h-100 o_gantt_progress"
                      t-attf-style="width:{{ pill._progress }}%;"/>
            </div>
            <span class="o_gantt_pill_title bg-view text-truncate px-1 z-index-1"
                  t-esc="pill.displayName"/>
        </div>
    </t>
</t>
                      <t t-elif="model.metaData.scale.id == 'week'">
                         <t t-foreach="row.pills" t-as="pill" t-key="pill.id">
                             <div class="o_gantt_pill_wrapper o_gantt_group_pill align-items-center"
                                  t-att-class="{
                                    o_sample_data_disabled: isDisabled(row),
                                    o_group_open: !model.isClosed(row.id),
                                    }"
                                  t-att-style="getGridPosition({'column':[pill.grid.column[0]+17,pill.grid.column[1]],'row':pill.grid.row})">
                                 <div class="o_gantt_pill o_gantt_consolidated_pill position-relative overflow-visible"
                                      t-att-class="pill.className"
                                      t-att-title="pill.displayName">
                                    <span t-if="pill._progress"
                                          class="position-absolute h-100 o_gantt_progress"
                                          t-attf-style="width:{{ pill._progress }}%;"/>
                                 </div>
                                 <span class="o_gantt_pill_title 111 bg-view text-truncate px-1 z-index-1"
                                       t-esc="pill.displayName"/>
                             </div>
                         </t>
                     </t>
                      <t t-elif="model.metaData.scale.id == 'day'">
                         <t t-foreach="row.pills" t-as="pill" t-key="pill.id">
                             <div class="o_gantt_pill_wrapper o_gantt_group_pill align-items-center"
                                  t-att-class="{
                                    o_sample_data_disabled: isDisabled(row),
                                    o_group_open: !model.isClosed(row.id),
                                    }"
                                  t-att-style="getGridPosition({'column':[pill.grid.column[0]+40,pill.grid.column[1]],'row':pill.grid.row})">
                                 <div class="o_gantt_pill o_gantt_consolidated_pill position-relative overflow-visible"
                                      t-att-class="pill.className"
                                      t-att-title="pill.displayName">
                                    <span t-if="pill._progress"
                                          class="position-absolute h-100 o_gantt_progress"
                                          t-attf-style="width:{{ pill._progress }}%;"/>
                                 </div>
                                 <span class="o_gantt_pill_title 111 bg-view text-truncate px-1 z-index-1"
                                       t-esc="pill.displayName"/>
                             </div>
                         </t>
                     </t>
                      <t t-else="">
                         <t t-foreach="row.pills" t-as="pill" t-key="pill.id">
                             <div class="o_gantt_pill_wrapper o_gantt_group_pill align-items-center"
                                  t-att-class="{
                                    o_sample_data_disabled: isDisabled(row),
                                    o_group_open: !model.isClosed(row.id),
                                    }"
                                  t-att-style="getGridPosition({'column':[pill.grid.column[0]+18,pill.grid.column[1]],'row':pill.grid.row})">
                                 <div class="o_gantt_pill o_gantt_consolidated_pill position-relative overflow-visible"
                                      t-att-class="pill.className"
                                      t-att-title="pill.displayName">
                                    <span t-if="pill._progress"
                                          class="position-absolute h-100 o_gantt_progress"
                                          t-attf-style="width:{{ pill._progress }}%;"/>
                                 </div>
                                 <span class="o_gantt_pill_title 111 bg-view text-truncate px-1 z-index-1"
                                       t-esc="pill.displayName"/>
                             </div>
                         </t>
                     </t>
                 </t>

                  <t t-else="">
                     <t t-foreach="row.pills" t-as="pill" t-key="pill.id">
                        <t t-call="{{ constructor.pillTemplate }}"/>
                     </t>
                 </t>
             </t>

              <t t-else="">
                  <t t-foreach="columns" t-as="column" t-key="column.id">
                      <div
                              class="o_gantt_cell"
                              t-att-class="{
                        o_sample_data_disabled: isDisabled(row),
                        o_gantt_today: column.isToday,
                        o_gantt_group: row.isGroup,
                        o_gantt_hoverable: isHoverable(row),
                        o_group_open: !model.isClosed(row.id),
                      }"
                              t-attf-style="{{ getGridPosition({ column: column.grid.column, row: row.grid.row }) }};{{ row.cellColors[column.id] || '' }}"
                              t-att-data-row-id="row.id"
                              t-att-data-column-index="column_index"
                              t-on-pointerdown.synthetic="onSelectStart"
                              t-on-click.synthetic="() => row.isGroup and this.model.toggleRow(row.id)"/>
                  </t>
                  <t t-if="row.isGroup">
                      <t t-foreach="row.pills" t-as="pill" t-key="pill.id">
                         <div class="o_gantt_pill_wrapper o_gantt_group_pill align-items-center"
                              t-att-class="{
                                o_sample_data_disabled: isDisabled(row),
                                o_group_open: !model.isClosed(row.id),}"
                              t-att-style="getGridPosition(pill.grid)">
                            <div class="o_gantt_pill o_gantt_consolidated_pill position-relative overflow-visible"
                                 t-att-class="pill.className"
                                 t-att-title="pill.displayName">
                                <span t-if="pill._progress"
                                      class="position-absolute h-100 o_gantt_progress"
                                      t-attf-style="width:{{ pill._progress }}%;"/>
                            </div>
                             <span class="o_gantt_pill_title 222 bg-view text-truncate px-1 z-index-1"
                                   t-esc="pill.displayName"/>
                         </div>
                     </t>
                 </t>
                  <t t-else="">
                      <t t-foreach="row.pills" t-as="pill" t-key="pill.id">
                        <t t-call="{{ constructor.pillTemplate }}"/>
                      </t>
                 </t>

              </t>
          </t>
      </xpath>
   </t>

    <t t-inherit="web_gantt.GanttRenderer.Pill" t-inherit-mode="extension">
        <xpath expr="//t[@t-name='web_gantt.GanttRenderer.Pill']" position="replace">
              <t t-name="web_gantt.GanttRenderer.Pill">
                  <t t-if="activeModel == 'project.task'">
                  <t t-set="renderConnectors" t-value="shouldRenderRecordConnectors(pill.record)"/>
                      <t t-if="model.metaData.scale.id == 'year'">
                             <div class="o_gantt_pill_wrapper" t-att-class="{
                                    o_sample_data_disabled: isDisabled(row),
                                    o_draggable: !pill.disableDrag,
                                    o_undraggable: pill.disableDrag,
                                    o_resizable: !pill.disableStartResize or !pill.disableStopResize,
                                    'position-relative': renderConnectors
                                     }"
                                  t-att-style="getGridPosition({'column':[pill.grid.column[0]+13,pill.grid.column[1]],'row':pill.grid.row})"
                                  t-att-data-pill-id="pill.id">

                                     <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                                        <t t-set="alignment" t-value="{ horizontal: 'left', vertical: 'top' }"/>
                                     </t>

                                 <div class="o_gantt_pill position-relative h-100 d-flex align-items-center"
                                      t-att-class="pill.className"
                                      t-on-click.synthetic="(ev) => this.onPillClicked(ev, pill)">
                                         <span t-if="pill._progress"
                                               class="position-absolute h-100 o_gantt_progress"
                                               t-attf-style="width:{{ pill._progress }}%;"/>
                                     <span class="o_gantt_pill_title 33 text-truncate mx-1" t-esc="pill.displayName"/>
                                     <div t-if="pill.disableDrag" class="o_gantt_lock fa fa-lock ms-auto me-2"/>
                                     </div>

                                 <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                                        <t t-set="alignment" t-value="{ horizontal: 'right', vertical: 'bottom' }"/>
                                     </t>
                             </div>
                         </t>
                      <t t-elif="model.metaData.scale.id == 'week'">
                             <div class="o_gantt_pill_wrapper" t-att-class="{
                                    o_sample_data_disabled: isDisabled(row),
                                    o_draggable: !pill.disableDrag,
                                    o_undraggable: pill.disableDrag,
                                    o_resizable: !pill.disableStartResize or !pill.disableStopResize,
                                    'position-relative': renderConnectors
                                     }"
                                  t-att-style="getGridPosition({'column':[pill.grid.column[0]+9,pill.grid.column[1]],'row':pill.grid.row})"
                                  t-att-data-pill-id="pill.id">

                                     <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                                        <t t-set="alignment" t-value="{ horizontal: 'left', vertical: 'top' }"/>
                                     </t>

                                 <div class="o_gantt_pill position-relative h-100 d-flex align-items-center"
                                      t-att-class="pill.className"
                                      t-on-click.synthetic="(ev) => this.onPillClicked(ev, pill)">
                                         <span t-if="pill._progress"
                                               class="position-absolute h-100 o_gantt_progress"
                                               t-attf-style="width:{{ pill._progress }}%;"/>
                                     <span class="o_gantt_pill_title 33 text-truncate mx-1" t-esc="pill.displayName"/>
                                     <div t-if="pill.disableDrag" class="o_gantt_lock fa fa-lock ms-auto me-2"/>
                                     </div>

                                 <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                                        <t t-set="alignment" t-value="{ horizontal: 'right', vertical: 'bottom' }"/>
                                     </t>
                             </div>
                         </t>
                      <t t-elif="model.metaData.scale.id == 'month'">
                             <div class="o_gantt_pill_wrapper" t-att-class="{
                                    o_sample_data_disabled: isDisabled(row),
                                    o_draggable: !pill.disableDrag,
                                    o_undraggable: pill.disableDrag,
                                    o_resizable: !pill.disableStartResize or !pill.disableStopResize,
                                    'position-relative': renderConnectors
                                     }"
                                  t-att-style="getGridPosition({'column':[pill.grid.column[0]+28,pill.grid.column[1]],'row':pill.grid.row})"
                                  t-att-data-pill-id="pill.id">

                                     <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                                        <t t-set="alignment" t-value="{ horizontal: 'left', vertical: 'top' }"/>
                                     </t>

                                 <div class="o_gantt_pill position-relative h-100 d-flex align-items-center"
                                      t-att-class="pill.className"
                                      t-on-click.synthetic="(ev) => this.onPillClicked(ev, pill)">
                                         <span t-if="pill._progress"
                                               class="position-absolute h-100 o_gantt_progress"
                                               t-attf-style="width:{{ pill._progress }}%;"/>
                                     <span class="o_gantt_pill_title 33 text-truncate mx-1" t-esc="pill.displayName"/>
                                     <div t-if="pill.disableDrag" class="o_gantt_lock fa fa-lock ms-auto me-2"/>
                                     </div>

                                 <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                                        <t t-set="alignment" t-value="{ horizontal: 'right', vertical: 'bottom' }"/>
                                     </t>
                             </div>
                         </t>
                      <t t-elif="model.metaData.scale.id == 'day'">
                             <div class="o_gantt_pill_wrapper" t-att-class="{
                                    o_sample_data_disabled: isDisabled(row),
                                    o_draggable: !pill.disableDrag,
                                    o_undraggable: pill.disableDrag,
                                    o_resizable: !pill.disableStartResize or !pill.disableStopResize,
                                    'position-relative': renderConnectors
                                     }"
                                  t-att-style="getGridPosition({'column':[pill.grid.column[0]+40,pill.grid.column[1]],'row':pill.grid.row})"
                                  t-att-data-pill-id="pill.id">

                                     <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                                        <t t-set="alignment" t-value="{ horizontal: 'left', vertical: 'top' }"/>
                                     </t>

                                 <div class="o_gantt_pill position-relative h-100 d-flex align-items-center"
                                      t-att-class="pill.className"
                                      t-on-click.synthetic="(ev) => this.onPillClicked(ev, pill)">
                                         <span t-if="pill._progress"
                                               class="position-absolute h-100 o_gantt_progress"
                                               t-attf-style="width:{{ pill._progress }}%;"/>
                                     <span class="o_gantt_pill_title 33 text-truncate mx-1" t-esc="pill.displayName"/>
                                     <div t-if="pill.disableDrag" class="o_gantt_lock fa fa-lock ms-auto me-2"/>
                                     </div>

                                 <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                                        <t t-set="alignment" t-value="{ horizontal: 'right', vertical: 'bottom' }"/>
                                     </t>
                             </div>
                         </t>
                      <t t-else=" ">
                             <div class="o_gantt_pill_wrapper" t-att-class="{
                                o_sample_data_disabled: isDisabled(row),
                                o_draggable: !pill.disableDrag,
                                o_undraggable: pill.disableDrag,
                                o_resizable: !pill.disableStartResize or !pill.disableStopResize,
                                'position-relative': renderConnectors
                                 }"
                                  t-att-style="getGridPosition({'column':[pill.grid.column[0]+18,pill.grid.column[1]],'row':pill.grid.row})"
                                  t-att-data-pill-id="pill.id">

                                 <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                                    <t t-set="alignment" t-value="{ horizontal: 'left', vertical: 'top' }"/>
                                 </t>

                                 <div class="o_gantt_pill position-relative h-100 d-flex align-items-center"
                                      t-att-class="pill.className"
                                      t-on-click.synthetic="(ev) => this.onPillClicked(ev, pill)">
                                         <span t-if="pill._progress"
                                               class="position-absolute h-100 o_gantt_progress"
                                               t-attf-style="width:{{ pill._progress }}%;"/>
                                     <span class="o_gantt_pill_title 33 text-truncate mx-1" t-esc="pill.displayName"/>
                                     <div t-if="pill.disableDrag" class="o_gantt_lock fa fa-lock ms-auto me-2"/>
                                 </div>

                                 <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                                        <t t-set="alignment" t-value="{ horizontal: 'right', vertical: 'bottom' }"/>
                                 </t>
                            </div>
                         </t>
                     </t>
                  <t t-else="">
                      <t t-set="renderConnectors" t-value="shouldRenderRecordConnectors(pill.record)"/>
                      <div class="o_gantt_pill_wrapper"
                           t-att-class="{
                            o_sample_data_disabled: isDisabled(row),
                            o_draggable: !pill.disableDrag,
                            o_undraggable: pill.disableDrag,
                            o_resizable: !pill.disableStartResize or !pill.disableStopResize,
                            'position-relative': renderConnectors}"
                           t-att-style="getGridPosition(pill.grid)"
                           t-att-data-pill-id="pill.id">
                            <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                                <t t-set="alignment" t-value="{ horizontal: 'left', vertical: 'top' }"/>
                            </t>
                          <div class="o_gantt_pill position-relative h-100 d-flex align-items-center"
                               t-att-class="pill.className"
                               t-on-click.synthetic="(ev) => this.onPillClicked(ev, pill)">
                                <span t-if="pill._progress"
                                      class="position-absolute h-100 o_gantt_progress"
                                      t-attf-style="width:{{ pill._progress }}%;"/>
                              <span class="o_gantt_pill_title text-truncate mx-1" t-esc="pill.displayName"/>
                              <div t-if="pill.disableDrag" class="o_gantt_lock fa fa-lock ms-auto me-2"/>
                           </div>
                          <t t-if="renderConnectors" t-call="{{ constructor.connectorCreatorTemplate }}">
                             <t t-set="alignment" t-value="{ horizontal: 'right', vertical: 'bottom' }"/>
                          </t>
                        </div>
                     </t>

              </t>
         </xpath>
     </t>

    <t t-inherit="web_gantt.GanttRenderer" t-inherit-mode="extension">
         <xpath expr="//t[@t-name='web_gantt.GanttRenderer']" position="replace">
              <t t-name="web_gantt.GanttRenderer">
                  <t t-if="activeModel == 'project.task'">
                        <div t-ref="root"
                             class="o_gantt_renderer o_renderer bg-view"
                             t-att-class="{ o_no_groups: !model.metaData.groupedBy.length, [currentScaleClass]: true }"
                             t-attf-style="--Gantt__RowHeader-width: {{ state.rowHeaderWidth }}px;
                                    --Gantt__Pill-height: {{ pillHeight - 1 }}px;
                                    --Gantt__Row-height: {{ rowHeight }}px;
                                    --Gantt__Template-rows: {{ gridTemplate.rows }};
                                    --Gantt__Template-columns:
                                    {{
                                       model.metaData.scale.id == 'month' ? 94 :
                                      model.metaData.scale.id == 'week' ? 23 :
                                       model.metaData.scale.id == 'year' ? 27:
                                       model.metaData.scale.id == 'day' ? 134:
                                       gridTemplate.columns
                                   }};"

                             t-on-pointermove="throttledOnPointerMove"
                             t-on-pointerleave="onPointerLeave">

                             <t t-call="{{ constructor.headerTemplate }}"/>
                            <t t-if="model.metaData.groupedBy.length">
                                <div class="o_gantt_row_headers o_gantt_grid_rows">
                                    <t t-foreach="visibleRows" t-as="row" t-key="row.id">
                                        <t t-call="{{ constructor.rowHeaderTemplate }}"/>
                                    </t>
                                </div>
                             </t>
                            <div t-ref="cellContainer"
                                 class="o_gantt_cells o_gantt_grid_rows o_gantt_grid_columns position-relative">
                                <t t-foreach="visibleRows" t-as="row" t-key="row.id">
                                    <t t-call="{{ constructor.rowContentTemplate }}"/>
                                </t>
                                <t t-foreach="extraPills" t-as="pill" t-key="pill.id">
                                    <t t-call="{{ constructor.pillTemplate }}"/>
                                </t>
                                <t t-if="shouldRenderConnectors()">
                                    <t t-foreach="visibleConnectors" t-as="connector" t-key="connector.id">
                                        <GanttConnector
                                                reactive="connector"
                                                onRemoveButtonClick="() => this.onRemoveButtonClick(connector.id)"
                                                onLeftButtonClick="() => this.onRescheduleButtonClick('backward', connector.id)"
                                                onRightButtonClick="() => this.onRescheduleButtonClick('forward', connector.id)"
                                        />
                                    </t>
                                </t>
                                <GanttResizeBadge reactive="resizeBadgeReactive"/>
                            </div>
                            <t t-if="totalRow">
                                <t t-call="{{ constructor.totalRowTemplate }}"/>
                            </t>
                        </div>
                  </t>

                  <t t-else="">
                      <div t-ref="root"
                           class="o_gantt_renderer o_renderer bg-view"
                           t-att-class="{ o_no_groups: !model.metaData.groupedBy.length }"
                           t-attf-style="--Gantt__RowHeader-width:{{state.rowHeaderWidth}}px;
                          --Gantt__Pill-height:{{pillHeight - 1}}px;
                          --Gantt__Row-height:{{rowHeight}}px;
                          --Gantt__Template-rows:{{gridTemplate.rows}};
                          --Gantt__Template-columns:{{gridTemplate.columns}}"
                           t-on-pointermove="throttledOnPointerMove"
                           t-on-pointerleave="onPointerLeave">

                          <t t-call="{{ constructor.headerTemplate }}"/>
                          <t t-if="model.metaData.groupedBy.length">
                              <div class="o_gantt_row_headers o_gantt_grid_rows">
                                  <t t-foreach="visibleRows" t-as="row" t-key="row.id">
                                      <t t-call="{{ constructor.rowHeaderTemplate }}"/>
                                  </t>
                              </div>
                          </t>

                          <div t-ref="cellContainer"
                               class="o_gantt_cells o_gantt_grid_rows o_gantt_grid_columns position-relative">
                                    <t t-foreach="visibleRows" t-as="row" t-key="row.id">
                                        <t t-call="{{ constructor.rowContentTemplate }}"/>
                                    </t>
                              <t t-foreach="extraPills" t-as="pill" t-key="pill.id">
                                     <t t-call="{{ constructor.pillTemplate }}"/>
                              </t>
                              <t t-if="shouldRenderConnectors()">
                                        <t t-foreach="visibleConnectors" t-as="connector" t-key="connector.id">
                                            <GanttConnector
                                                    reactive="connector"
                                                    onRemoveButtonClick="() => this.onRemoveButtonClick(connector.id)"
                                                    onLeftButtonClick="() => this.onRescheduleButtonClick('backward', connector.id)"
                                                    onRightButtonClick="() => this.onRescheduleButtonClick('forward', connector.id)"/>
                                        </t>
                              </t>
                              <GanttResizeBadge reactive="resizeBadgeReactive"/>
                          </div>

                          <t t-if="totalRow">
                            <t t-call="{{ constructor.totalRowTemplate }}"/>
                          </t>
                      </div>
                  </t>
              </t>
         </xpath>
    </t>

</templates>