<odoo>
    <data>

        <template id="job_costing_report_template_id">
            <t t-call="web.html_container">
                <div class="page">
                <div class="header">
                    <table class='table-borderless' width="100%">
                        <tr width="100%">
                            <td width="75%" align="left" style="font-size:20px;padding-top:50px;">
                                <strong>
                                    <span t-esc="company_name"/>
                                </strong>
                            </td>
                            <td width="25%" align="right" style="padding-top:50px;">
                                <strong>
                                    <span>Page:
                                        <span class="page"/>
                                        of
                                        <span class="topage"/>
                                    </span>
                                </strong>
                            </td>
                        </tr>
                        <tr width="100%">
                            <td width="100%" align="left" style="font-size:12px;" colspan="2">
                                <t t-if="company_zip">
                                    <span>P.O.Box:</span>
                                    <span t-esc="company_zip"/>,
                                </t>
                                <t t-if="company_state">
                                    <span t-esc="company_state"/>,
                                </t>
                                <t t-if="company_country_code">
                                    <span t-esc="company_country_code"/>
                                </t>
                            </td>
                        </tr>
                        <tr width="100%">
                            <td width="100%" align="center" style="font-size:15px;padding-top:20px;" colspan="2">
                                <strong>
                                    <span>JobCosting Report of</span>
                                </strong>
                            </td>
                        </tr>
                    </table>
                </div>

                <!-- Expense Table Section -->
                <table class="table-borderless" width="100%">
                    <tr width="100%">
                        <td width="100%" colspan="5" style="border-top: 1pt solid black; padding-bottom: 15px;"/>
                    </tr>
                    <tr width="100%">
                        <td width="70%" align="right" style="font-size: 13px;" colspan="2">
                            <strong>Job No:</strong>
                        </td>
                        <td width="30%" align="left" style="font-size: 13px;" colspan="3">
                            <strong></strong>
                        </td>
                    </tr>
                    <tr width="100%">
                        <td width="100%" colspan="5" style="border-top: 1pt solid black;"/>
                    </tr>
                    <tr width="100%">
                        <td width="15%" align="center" style="font-size: 13px;">
                            <strong>Code</strong>
                        </td>
                        <td width="55%" align="center" style="font-size: 13px;">
                            <strong>Description</strong>
                        </td>
                        <td width="10%" align="center" style="font-size: 13px;">
                            <strong>Qty</strong>
                        </td>
                        <td width="10%" align="right" style="font-size: 13px;">
                            <strong>Expense</strong>
                        </td>
                        <td width="10%" align="right" style="font-size: 13px;">
                            <strong>Income</strong>
                        </td>
                    </tr>
                    <tr width="100%">
                        <td width="100%" colspan="5" style="border-bottom: 1pt solid black;"/>
                    </tr>
                </table>
                <br/>
                <br/>

                <table width="100%">
                    <td width="15%" style="text-align: left; font-size: 13px;">
                        MISN
                    </td>

                </table>
                <table width="100%">
                    <td width="15%" style="text-align: left; font-size: 13px;">
                        12355
                    </td>
                    <td width="10%" style="text-align: left; font-size: 13px;">
                        Date
                    </td>

                </table>
                <!-- Loop through values and separate them by form type -->
                <t t-foreach="rep" t-as="line">


                    <!--                        <t t-if="line['form_type'] != last_form_type">  &lt;!&ndash; Check if form type changed &ndash;&gt;-->
                    <!--                            <p style="font-size: 14px; font-weight: bold;">-->
                    <!--                                <t t-esc="line['form_type']"/>-->
                    <!--                            </p>-->
                    <!--                        </t>-->
                    <!--                        <t t-set="last_form_type" t-value="line['form_type']"/>-->

                    <!-- Store last form type -->

                    <table class="table-borderless" width="100%">
                        <tr>
                            <td width="15%" style="text-align: left; font-size: 13px;">
                                <t t-esc="line['name']"/>
                            </td>
                            <td width="55%" style="text-align: center; font-size: 13px;">
                                <t t-esc="line['product_id']"/>
                            </td>
                            <td width="10%" style="text-align: center; font-size: 13px;">
                                <t t-esc="line['qty']"/>
                            </td>
                            <td width="10%" style="text-align: right; font-size: 13px;">
                                <t t-esc="line['unit_price']"/>
                            </td>
                            <td width="10%" style="text-align: right; font-size: 13px;">
                                <!-- Unit total calculation -->
<!--                                <t t-esc="line['unit_price'] * line['qty']"/>-->
                            </td>
                        </tr>

                        <!-- Blank rows for spacing -->
                        <tr>
                            <td colspan="5" style="height: 10px;"></td>
                        </tr>

                        <tr>
                            <td colspan="3"></td>
<!--                            <td style="font-size: 13px; text-align: right;">-->
<!--                                <strong>Total:</strong>-->
<!--                            </td>-->
                            <td style="font-size: 13px; text-align: right;">
                                <strong>
                                    <span t-esc="sum(float(line.get('unit_price', 0.00) or 0.00) for line in rep)"/>
                                </strong>
                            </td>
                        </tr>
                    </table>



            </t>

            <br/>
            <br/>
            <table width="100%">
                <td width="15%" style="text-align: left; font-size: 13px;">
                    SALE
                </td>

            </table>
            <table width="100%">
                <td width="15%" style="text-align: left; font-size: 13px;">
                    12355
                </td>
                <td width="10%" style="text-align: left; font-size: 13px;">
                    Date
                </td>

            </table>
            <!-- Loop through values and separate them by form type -->
            <t t-foreach="values" t-as="line">


                <t t-if="line['form_type'] != last_form_type">  <!-- Check if form type changed -->
                    <p style="font-size: 14px; font-weight: bold;">
                        <t t-esc="line['form_type']"/>
                    </p>
                </t>
                <t t-set="last_form_type" t-value="line['form_type']"/>

                <!-- Store last form type -->

                <table class="table-borderless" width="100%">
                    <tr>
                        <td width="15%" style="text-align: left; font-size: 13px;">
                            <t t-esc="line['name']"/>
                        </td>
                        <td width="55%" style="text-align: center; font-size: 13px;">
                            <t t-esc="line['product_id']"/>
                        </td>
                        <td width="10%" style="text-align: center; font-size: 13px;">
                            <t t-esc="line['qty']"/>
                        </td>
                        <td width="10%" style="text-align: right; font-size: 13px;">
                            <!--                <t t-esc="line['unit_price']"/>-->
                        </td>
                        <td width="10%" style="text-align: right; font-size: 13px;">
                            <t t-esc="line['unit_price']"/>  <!-- Calculate total -->
                        </td>
                    </tr>
                </table>
            </t>
            <br/>
            <br/>
            <table width="100%">


                <td width="50%" style="padding: 5px; text-align: right;font-size: 13px;">
                    <strong>
                        <span t-esc="sum(float(line.get('unit_price', 0.00) or 0.00) for line in values)"/>

                    </strong>
                </td>


            </table>


            <div class="footer">
                <table class='table-borderless' width="100%">
                    <tr width="100%">
                        <td width="100%" colspan="3" style="border-top: 1pt solid black;padding-bottom:20px;"/>
                    </tr>
                    <tr width="100%">
                        <td width="30%" align="left">
                            <strong>
                                <span>Run Date &amp; Time:
                                    <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d/%m/%Y')"/>
                                </span>
                            </strong>
                        </td>
                        <td width="20%" align="left">
                            <strong>
                                <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%I:%M:%S%p')"/>
                            </strong>
                        </td>
                        <td width="50%" align="right">
                            <strong>
                                <span>LOGIN ID:</span>
                                <span t-esc="log_user_name"/>
                            </strong>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </t>
</template>

<record id="kg_action_job_costing_report" model="ir.actions.report">
<field name="name">Job Costing</field>
<field name="model">job.costing</field>
<field name="report_type">qweb-pdf</field>
<field name="print_report_name">Service Report</field>
<field name="report_name">kg_voyage_marine_sale.job_costing_report_template_id</field>
<field name="report_file">kg_voyage_marine_sale.job_costing_report_template_id</field>
<field name="binding_type">report</field>
</record>

        </data>
        </odoo>
