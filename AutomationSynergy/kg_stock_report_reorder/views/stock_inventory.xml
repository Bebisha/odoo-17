<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <!--        server action for showing pop-up-->
    <record id="server_action_open_stock_list_view" model="ir.actions.server">
        <field name="name">Create RFQ</field>
        <field name="model_id" ref="model_product_product"/>
        <field name="state">code</field>
        <field name="code">
            action = env['product.product'].action_open_wizard_create_rfq()
        </field>
    </record>


    <record id="product_form_view_inherit_reorder" model="ir.ui.view">
        <field name="name">product.product.re.order</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="product.product_normal_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='barcode']" position="after">
                <field name="is_minimum_quantity" string="Is Reach Minimum Quantity" force_save="1" invisible="1"/>
            </xpath>
        </field>
    </record>

    <odoo>
        <!-- Inherit the existing product search view -->
        <record id="product_product_search_view_custom" model="ir.ui.view">
            <field name="name">product.product.search.view.custom</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_search_form_view"/>
            <field name="arch" type="xml">
                <xpath expr="//search" position="inside">
                    <filter string="Minimum Quantity" name="is_minimum_quantity"
                            domain="[('is_minimum_quantity', '=', True)]"/>
                    <!--                        <group expand="1" string="Group By">-->
                    <!--                            <filter string="mINIMUM qUANUTITY" name="groupby_is_minimum_quantity" context="{'group_by': 'is_minimum_quantity'}"/>-->
                    <!--                        </group>-->
                </xpath>
            </field>
        </record>
    </odoo>


    <!--    replaced view for applying decaration-->
    <record id="stock_report_inherit" model="ir.ui.view">
        <field name="name">product.stock.report.inherit</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="stock.product_product_stock_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="replace">
                <tree sample="1" js_class="stock_report_list_view" decoration-danger="is_minimum_quantity == True">
                    <field name="id" column_invisible="True"/>
                    <field name="display_name" string="Product"/>
                    <field name="categ_id" optional="hide"/>
                    <field name="is_minimum_quantity"/>
                    <field name="qty_available" string="On Hand" sum="Total On Hand"/>
                    <button name="551" title="Inventory Adjustment" type="action" class="btn-link" icon="fa-pencil"
                            context="{'search_default_product_id': id, 'default_product_id': id}"/>
                    <field name="free_qty" string="Free to Use" sum="Total Free to Use"/>
                    <field name="incoming_qty" optional="show" sum="Total Incoming"/>
                    <field name="outgoing_qty" optional="show" sum="Total Outgoing"/>
                    <field name="virtual_available" string="Forecasted" optional="hide" sum="Total Forecasted"/>
                    <field name="uom_id" string="Unit" groups="uom.group_uom" options="{'no_create': True}"/>
                    <button name="560" string="History" type="action" class="btn-link" icon="fa-history"
                            context="{'search_default_product_id': id, 'default_product_id': id}"/>
                    <button name="action_view_orderpoints" string="Replenishment" type="object" class="btn-link"
                            icon="fa-refresh" context="{'search_default_product_id': id, 'is_stock_report': True}"/>
                    <button name="552" string="Locations" type="action" class="btn-link"
                            groups="stock.group_stock_multi_locations" icon="fa-cubes"
                            context="{'search_default_product_id': id, 'default_product_id': id}"
                            invisible="qty_available == 0"/>
                    <button name="action_product_forecast_report" string="Forecast" type="object" class="btn-link"
                            icon="fa-area-chart" context="{'default_product_id': id}"
                            invisible="incoming_qty == 0 and outgoing_qty == 0"/>
                </tree>
            </xpath>
        </field>
    </record>


</odoo>
