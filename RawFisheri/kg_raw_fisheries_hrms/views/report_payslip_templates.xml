<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>

        <template id="report_payslip_inherit_id" inherit_id='hr_payroll.report_payslip'>
            <xpath expr="//t[@t-call='web.external_layout']" position="replace">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2 id="payslip_name">
                            <span t-field="o.name">August 2023 Payslip</span>
                        </h2>
                        <t t-set="is_invalid" t-value="o._is_invalid()"/>
                        <div t-if="is_invalid">
                            <strong id="invalid_warning">
                                <span t-out="is_invalid">This payslip is not validated. This is not a legal document.
                                </span>
                            </strong>
                        </div>
                        <div t-else="">
                            <div class="oe_structure"></div>
                        </div>
                        <table name="employee-infos" id="employee_info_table_1" class="table table-sm table-bordered">
                            <tr id="employee_info_line_1">
                                <td class="w-25">
                                    <strong>Employee</strong>
                                </td>
                                <td class="w-25">
                                    <strong>Marital Status</strong>
                                </td>
                                <td class="w-25">
                                    <strong>Designation</strong>
                                </td>
                                <td class="w-25">
                                    <strong>Pay Period</strong>
                                </td>
                            </tr>
                            <tr id="employee_info_line_2">
                                <td>
                                    <span t-field="o.employee_id"/>
                                </td>
                                <td>
                                    <span t-field="o.employee_id.marital"/>
                                </td>
                                <td>
                                    <span t-field="o.employee_id.job_title"/>
                                </td>
                                <td>
                                    <span t-field="o.date_from"/>
                                    <span>-</span>
                                    <span t-field="o.date_to"/>
                                </td>
                            </tr>
                            <tr id="employee_info_line_3">
                                <td class="w-25"/>
                                <td class="w-25">
                                    <strong>Vessel</strong>
                                </td>
                                <td class="w-25">
                                    <strong>Department</strong>
                                </td>
                                <td class="w-25">
                                    <strong>Nationality</strong>
                                </td>
                            </tr>
                            <tr id="employee_info_line_4">
                                <td/>
                                <td>
                                    <span t-field="o.employee_id.sponsor_name"/>
                                </td>
                                <td>
                                    <span t-field="o.employee_id.department_id"/>
                                </td>
                                <td>
                                    <span t-field="o.employee_id.country_id"/>
                                </td>
                            </tr>
                        </table>

                        <table class="table table-sm" t-if="not o.struct_id.hide_basic_on_pdf">
                            <tr>
                                <t t-if="o.contract_id.daily_wage">
                                    <td class="w-25">
                                        <strong>Basic Salary (Daily)</strong>
                                    </td>
                                    <td style="color:#875A7B; text-align:right" class="w-25">
                                        <span t-field="o.contract_id.basic_per_day"
                                              t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                                    </td>
                                </t>
                                <t t-else="">
                                    <td class="w-25">
                                        <strong>Basic Salary (Monthly)</strong>
                                    </td>
                                    <td style="color:#875A7B; text-align:right" class="w-25">
                                        <span t-out="o.contract_id._get_contract_wage()"
                                              t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                                    </td>
                                </t>
                                <td class="w-25"></td>
                                <td class="w-25"></td>
                            </tr>
                        </table>
                        <div id="total">
                            <table class="table table-sm">
                                <thead class="o_black_border">
                                    <tr>
                                        <th id="line_header_name">Name</th>
                                        <t t-if="o.employee_id.crew">
                                            <th id="line_header_basic_per_day">Basic Per Day</th>
                                        </t>
                                        <th id="line_header_days">Number of Days</th>
                                        <th id="line_header_amount" class="text-end">Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Basic Salary Line -->
                                    <t t-set="basic_salary_line"
                                       t-value="o.line_ids.filtered(lambda line: line.code == 'BASIC')"/>
                                    <tr t-if="basic_salary_line" id="basic_salary_row">
                                        <td id="payslip_line_name">
                                            <span t-field="basic_salary_line.name"/>
                                        </td>
                                        <td id="basic_per_day" style="text-align:right">
                                            <t t-if="o.employee_id.crew">
                                                <span t-field="basic_salary_line.slip_id.contract_id.basic_per_day"/>
                                            </t>
                                        </td>
                                        <td id="worked_days_days" style="text-align:center">
                                            <span t-field="o.total_worked_days"/>
                                        </td>
                                        <td id="payslip_line_total" class="text-end">
                                            <span t-field="basic_salary_line.total"
                                                  t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                        </td>
                                    </tr>

                                    <!-- Remaining Payslip Lines -->
                                    <t t-id="payslip_lines">
                                        <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.code != 'BASIC')"
                                              t-as="line">
                                            <t t-set="line_styling" t-value="line.get_payslip_styling_dict()"/>
                                            <t t-set="line_style"/>
                                            <t t-set="line_class"/>
                                            <t t-if="line.code in line_styling">
                                                <t t-set="line_style" t-value="line_styling[line.code]['line_style']"/>
                                                <t t-set="line_class" t-value="line_styling[line.code]['line_class']"/>
                                            </t>
                                            <t t-if="not line.salary_rule_id.for_oman and line.slip_id.employee_id.country_id.code != 'OM'">
                                                <tr t-att-class="line_class" t-att-style="line_style" id="line_display">
                                                    <td id="payslip_line_name">
                                                        <span t-field="line.name"/>
                                                    </td>
                                                    <td id="payslip_line_rate"></td>
                                                    <td id="payslip_line_quantity">
                                                        <span t-if="line.quantity > 1" t-esc="line.quantity"/>
                                                    </td>
                                                    <td id="payslip_line_total" class="text-end">
                                                        <span t-esc="line.total"
                                                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'
                                                              t-att-style="'color:#875A7B;' if line.total &lt; 0 else ''"/>
                                                    </td>
                                                </tr>
                                            </t>
                                            <t t-elif="line.slip_id.employee_id.country_id.code == 'OM'">
                                                <tr t-att-class="line_class" t-att-style="line_style" id="line_display">
                                                    <td id="payslip_line_name">
                                                        <span t-field="line.name"/>
                                                    </td>
                                                    <td id="payslip_line_rate"></td>
                                                    <td id="payslip_line_quantity">
                                                        <span t-if="line.quantity > 1" t-esc="line.quantity"/>
                                                    </td>
                                                    <td id="payslip_line_total" class="text-end">
                                                        <span t-esc="line.total"
                                                              t-options='{"widget": "monetary", "display_currency": o.currency_id}'
                                                              t-att-style="'color:#875A7B;' if line.total &lt; 0 else ''"/>
                                                    </td>
                                                </tr>
                                            </t>
                                        </span>
                                    </t>
                                </tbody>
                            </table>
                            <div class="oe_structure"></div>
                        </div>
                        <div id="to_pay">
                            <p t-if="o.net_wage &gt;= 0">To pay on
                                <b>
                                    <span t-field="o.employee_id.bank_account_id">39560123456</span>
                                </b>
                                of
                                <i>
                                    <span t-field="o.employee_id">John Smith</span>
                                </i>
                                :<span t-field="o.net_wage"/>$100
                            </p>
                            <p t-if="o.net_wage &lt; 0">The net amount will be recovered from the first positive
                                remuneration established after this.
                            </p>
                        </div>
                    </div>
                </t>
            </xpath>
        </template>

    </data>
</odoo>