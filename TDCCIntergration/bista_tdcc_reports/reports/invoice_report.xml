<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="invoice_form_header_footer">
        <div class="header">
            <table class='table table-borderless table-condensed table-hover'
                   style="width:100%;">
                <tr>

                </tr>
                <tr>
                    <td style="width:50%;text-align: left;height: 100px;">
                        <img t-att-src="image_data_uri(docs.company_id.logo)" style="height:150px;width:170px;margin-top:-15px; margin-left: 110px
                                             position:fixed;right:50px;top:30px;" alt="Company Logo"/>
                    </td>

                    <td rowspan="2" style="width:25%;text-align: center;">

                    </td>
                    <td rowspan="2" style="width:50%;text-align:center;">
                        <strong>
                            <span style="font-size:24px;" t-field="docs.company_id.name"/>
                        </strong>
                        <br/>
                        <t t-if="docs.company_id.street">
                            <span t-field="docs.company_id.street"/>,
                        </t>
                        <t t-if="docs.company_id.street2">
                            <span t-field="docs.company_id.street2"/>,
                        </t>
                        <t t-if="docs.company_id.street or docs.company_id.street2">
                            <br/>
                        </t>
                        <t t-if="docs.company_id.zip">
                            P.O.Box:
                            <span t-field="docs.company_id.zip"/>
                        </t>
                        <t t-if="docs.company_id.city">
                            <br/>
                            <span t-field="docs.company_id.city"/>,
                        </t>
                        <t t-if="docs.company_id.state_id">
                            <span t-field="docs.company_id.state_id"/>,
                            <br/>
                        </t>
                        <t t-if="docs.company_id.country_id">
                            <span t-field="docs.company_id.country_id"/>
                        <br/>
                        </t>
                        <t t-if="docs.company_id.vat">
                            <span>TRN:</span><span t-field="docs.company_id.vat"/>
                        </t>
                        <br/>
                        <br/>
                    </td>
                </tr>
            </table>
        </div>
        <div class="article" t-att-data-oe-model="doc and doc._name" t-att-data-oe-id="doc and doc.id"
             t-att-data-oe-lang="doc and doc.env.context.get('lang')">
            <t t-raw="0"/>

        </div>
        <div class="footer" style="border-top:1px solid black;">
            <div class="last-page"
                 style="position: absolute; float: left; width:100%; margin-left: 10px; border-bottom: none; border: 1px solid white;">
                <div style="float: left; width:33%; padding-left: 1%; height: 80px; vertical-align: top;">
                   Client Signature
                    <br/>
                </div>
                <div style="float: left; width:33%; padding-left: 1%; height: 80px; vertical-align: top;">

                </div>
                <div style="float: left; width:30%; padding-left: 1%; height: 80px; vertical-align: top; text-align: right;">
                    TDCC Signature
                    <br/>
                </div>
            </div>
        </div>

        <!--        <div class="footer" style="border-top:1px solid black;">-->

        <!--            <div class="pull-right" style="margin-right:100px;">-->
        <!--                Client Signature-->
        <!--            </div>-->
        <!--                <div class="pull-left" >-->
        <!--                TDCC Signature-->
        <!--            </div>-->
        <!--        </div>-->

    </template>

    <template id="report_invoice_form_document">
        <t t-call="bista_tdcc_reports.invoice_form_header_footer">
            <div class="page">
                <style>
                    div, span {
                    font-size: 12pt;
                    }
                    .clearfix::after {
                    content: "";
                    display: table;
                    clear: both;
                    }
                    .table-container {
                    float: right;
                    width: 30%;
                    }
                </style>
                <div style="margin-top:20px;">
                    <span>
                        <span t-esc="doc.partner_id.name"/>
                    </span>
                    <br/>
                    <t t-if="doc.attendant_id">
                        Attendant :
                        <span t-esc="doc.attendant_id.name"></span>
                    </t>
                    <t t-if="doc.partner_id.vat">
                        TRN:
                        <span t-esc="doc.partner_id.vat"></span>
                    </t>
                </div>
                <div style="margin-top:30px;">
                    <t t-if="doc.move_type in ('out_refund', 'in_refund')">
                        <strong>Credit Note</strong>
                        <br/>
                    </t>
                    <t t-else="">
                        <strong>TAX INVOICE</strong>
                        <br/>
                    </t>
                    Invoice Number :
                    <span t-esc="doc.name"/>
                    <br/>
                    Date:
                    <span t-field="doc.invoice_date" t-options='{"format": "dd/MM/yyyy"}'/>
                </div>
                <table class="table table-borderless" style="margin-top:30px;">
                    <thead>
                        <tr>
                            <t t-if="doc.with_service_type">
                                <th class="text-left">Service Type</th>
                            </t>
                            <th class="text-left">Item</th>
                            <t t-if="doc.with_description">
                                <th class="text-left">Description</th>
                            </t>
                            <th class="text-right">Quantity</th>
                            <th class="text-right">Unit Price</th>
                            <th class="text-right">Vat</th>
                            <th class="text-right">Line Total</th>
                        </tr>
                    </thead>
                    <tbody class="invoice_tbody">
                        <tr t-foreach="doc.invoice_line_ids" t-as="line">
                            <t t-if="line.move_id.with_service_type">
                                <td>
                                    <span t-field="line.service_type_id.name"/>
                                </td>
                            </t>
                            <td>
                                <span t-field="line.product_id.name"/>
                            </td>
                            <t t-if="line.move_id.with_description">
                                <td>
                                    <span t-field="line.name"/>
                                </td>
                            </t>
                            <td class="text-right">
                                <span t-esc="'%.2f'% line.quantity"/>
                            </td>
                            <td class="text-right">
                                <span t-field="line.price_unit"/>
                            </td>
                            <td class="text-right">
                                <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))"/>
                            </td>
                            <td class="text-right">
                                <span t-field="line.price_subtotal"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="clearfix">
                    <div id="total" class="table-container">
                        <table width='100%' class="table table-sm">
                            <tr class="border-black" style="border-bottom:1px solid #dddddd;">
                                <td>
                                    <strong>Net</strong>
                                </td>
                                <td class="text-right">
                                    <span t-field="doc.amount_untaxed"/>
                                </td>
                            </tr>
                            <tr class="border-black" style="border-bottom:1px solid #dddddd;">
                                <td>
                                    <strong>VAT</strong>
                                </td>
                                <td class="text-right">
                                    <span t-field="doc.amount_tax"/>
                                </td>
                            </tr>
                            <tr class="border-black">
                                <td>
                                    <strong>Total</strong>
                                </td>
                                <td class="text-right">
                                    <span t-field="doc.amount_total"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </t>
    </template>


    <!-- Main Transfer Form Template -->
    <template id="report_invoice_form">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="bista_tdcc_reports.report_invoice_form_document"/>
            </t>
        </t>
    </template>

</odoo>
